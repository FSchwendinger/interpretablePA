% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/app.R
\name{interpret.pa.centiles}
\alias{interpret.pa.centiles}
\title{Combine Subject Data with GGIR Output and Predict Centiles}
\usage{
interpret.pa.centiles(
  dat_path = NULL,
  part2_path,
  output_path = part2_path,
  col_id = "ID",
  col_sex = "sex",
  col_age = "age",
  sex_code_male = "0",
  sex_code_female = "1",
  reference_set = "nhanes",
  col_avacc = "AD_mean_ENMO_mg_0.24hr",
  col_ig = "AD_ig_gradient_ENMO_0.24hr"
)
}
\arguments{
\item{dat_path}{Character or NULL. Path to the file containing subject characteristics
(CSV or Excel). If NULL, subject data will be extracted from \code{part2_path}.}

\item{part2_path}{Character. Path to the GGIR \code{part2_summary.csv} file.}

\item{output_path}{Character or NULL. Full path where the output CSV should be saved. If NULL, CSV will be saved to part2_path.
Default is NULL.}

\item{col_id}{Character. Column name for participant ID in subject data and/or part 2 file. If both files are specified, IDs need to match between files.}

\item{col_sex}{Character. Column name for sex in subject data and/or part 2 file.}

\item{col_age}{Character. Column name for age in subject data and/or part 2 file.}

\item{sex_code_male}{Character. Encoding for male sex in the dataset (e.g., "0" or "m").}

\item{sex_code_female}{Character. Encoding for female sex in the dataset (e.g., "1" or "f").}

\item{reference_set}{Character. One of "fairclough", "rowlands", or "nhanes".}

\item{col_avacc}{Character. Column name for average acceleration in GGIR output.
Default is "AD_mean_ENMO_mg_0.24hr".}

\item{col_ig}{Character. Column name for intensity gradient in GGIR output.
Default is "AD_ig_gradient_ENMO_0.24hr".}
}
\value{
A data frame with subject ID, sex, age, AvAcc and IG values, and their predicted centiles.
Also writes the resulting data to a CSV file.

In addition:
\itemize{
\item Saves the resulting data to a CSV file.
\item Saves four PNG plots (400 DPI) in the same directory as \code{output_path} or \code{part2_path}.
}
}
\description{
This function integrates subject demographic data with GGIR part 2 summary output,
and predicts age- and sex-specific centiles for average acceleration (AvAcc) and
intensity gradient (IG) using internal reference datasets included in the package.
The merged data is written to the specified output path.
}
\details{
Centiles are computed by comparing each participant's AvAcc and IG values against
reference distributions derived from large population datasets. Interpolation is
used to estimate the centile rank for a given value at the participant's age and sex.
If a participantâ€™s age is outside the valid age range for the selected reference set,
centile values are marked accordingly and set to \code{NA} for plotting purposes.

Supported reference datasets:
\itemize{
\item Fairclough et al. (2023) \link{Children}
\item Rowlands et al. (2025) \link{Adults}
\item Schwendinger et al. (2025) NHANES \link{Adults}
}

Key features:
\itemize{
\item Users may specify custom column names for AvAcc and IG in GGIR output.
\item If no subject data file is provided (\code{dat_path = NULL}), the function extracts
subject characteristics (ID, sex, age) directly from the GGIR part 2 file.
\item Automatically saves four high-resolution PNG plots (400 DPI) for:
\enumerate{
\item AvAcc centile distribution
\item IG centile distribution
\item AvAcc centile vs. age
\item IG centile vs. age
}
}
}
\seealso{
\link[vignette:interpret-pa-centiles]{Vignette: interpret-pa-centiles}
}
